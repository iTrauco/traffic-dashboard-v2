<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Traffic QA Dashboard v2</title>
  <link rel="stylesheet" href="/css/base.css">
  <link rel="stylesheet" href="/css/components.css">
  <link rel="stylesheet" href="/css/modules/config.css">
</head>
<body>
  <header id="header"></header>
  <div class="container">
    
    <div id="app">
      <div class="module-grid">
        <div class="module-card">
          <div class="module-title">ðŸ“‹ Config Management</div>
          <div id="config-status" class="status not-loaded">Not Loaded</div>
          <p>County-based camera configuration generator</p>
          <div id="config-module"></div>
        </div>
        
        <div class="module-card">
          <div class="module-title">ðŸ“Š Camera Dashboard</div>
          <div class="status not-loaded">Coming Soon</div>
          <p>Recording status monitoring by config</p>
        </div>
        
        <div class="module-card">
          <div class="module-title">ðŸŽ¥ Video Processing</div>
          <div class="status not-loaded">Coming Soon</div>
          <p>Overlay editor and video downloads</p>
        </div>
        
        <div class="module-card">
          <div class="module-title">âœ… QA Interface</div>
          <div class="status not-loaded">Coming Soon</div>
          <p>Camera quality assessment and notes</p>
        </div>
      </div>
    </div>
  </div>

  <script src="/js/components/Header.js"></script>
  <script>
    class ModuleLoader {
      constructor() {
        this.modules = new Map();
      }

      async loadModule(name, containerId) {
        try {
          // Load the module script dynamically
          const script = document.createElement('script');
          script.src = `/js/modules/${name}/${name}.js`;
          document.head.appendChild(script);
          
          // Wait for script to load
          await new Promise((resolve, reject) => {
            script.onload = resolve;
            script.onerror = reject;
          });
          
          const moduleClass = window[name.charAt(0).toUpperCase() + name.slice(1)];
          if (moduleClass) {
            const instance = new moduleClass(containerId);
            this.modules.set(name, instance);
            this.updateStatus(name, 'loaded');
            return instance;
          }
        } catch (error) {
          console.warn(`Failed to load module ${name}:`, error);
          this.updateStatus(name, 'not-loaded');
        }
      }

      updateStatus(moduleName, status) {
        const statusEl = document.getElementById(`${moduleName}-status`);
        if (statusEl) {
          statusEl.className = `status ${status}`;
          statusEl.textContent = status === 'loaded' ? 'Loaded' : 'Not Loaded';
        }
      }

      async init() {
        // Try to load config management module
        await this.loadModule('config', 'config-module');
      }
    }

    // Initialize when DOM loads
    document.addEventListener('DOMContentLoaded', () => {
      const loader = new ModuleLoader();
      loader.init();
    });
  </script>
</body>
</html>